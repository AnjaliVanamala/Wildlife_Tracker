{% extends "base.html" %}
{% block content %}
<h2 style="margin-bottom: 1em;">Dashboard</h2>
<p>Welcome, {{ user }}!</p>

{% if sightings and sightings|length > 0 %}
    <h3 style="margin-top: 1.5em;">All Sightings:</h3>

    <div style="overflow-x: auto; margin-top: 1em;">
        <table style="
            width: 100%;
            border-collapse: collapse;
            border-radius: 8px;
            overflow: hidden;
            font-family: sans-serif;
            font-size: 0.95em;
            background-color: #fff;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        ">
            <thead style="background-color: #f5f5f5; text-align: left;">
                <tr>
                    <th style="padding: 12px;">Animal</th>
                    <th style="padding: 12px;">Location</th>
                    <th style="padding: 12px;">Date</th>
                    <th style="padding: 12px;">Time</th>
                    <th style="padding: 12px;">Total</th>
                    <th style="padding: 12px;">Male</th>
                    <th style="padding: 12px;">Female</th>
                </tr>
            </thead>
            <tbody>
                {% for s in sightings %}
                    <tr style="border-bottom: 1px solid #eee; transition: background 0.2s;">
                        <td style="padding: 12px;">{{ s.animal }}</td>
                        <td style="padding: 12px;">{{ s.location }}</td>
                        <td style="padding: 12px;">{{ s.day if s.day else '-' }}</td>
                        <td style="padding: 12px;">{{ s.time if s.time else '-' }}</td>
                        <td style="padding: 12px;">{{ s.number }}</td>
                        <td style="padding: 12px;">{{ s.male_count if s.male_count is not none else '-' }}</td>
                        <td style="padding: 12px;">{{ s.female_count if s.female_count is not none else '-' }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <p>No sightings recorded yet.</p>
{% endif %}

<hr style="margin-top: 2em;">

<div style="display: flex; gap: 10px;">
    <a href="{{ url_for('sighting') }}">
        <button style="padding: 10px 16px; border: none; border-radius: 6px; background-color: #007BFF; color: white; cursor: pointer;">Record New Sighting</button>
    </a>
    <a href="{{ url_for('logout') }}">
        <button style="padding: 10px 16px; border: none; border-radius: 6px; background-color: #dc3545; color: white; cursor: pointer;">Logout</button>
    </a>
</div>

<script>
    // Add row hover effect
    document.querySelectorAll("tbody tr").forEach(row => {
        row.addEventListener("mouseover", () => row.style.backgroundColor = "#f9f9f9");
        row.addEventListener("mouseout", () => row.style.backgroundColor = "white");
    });
</script>
{% endblock %}
